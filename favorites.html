<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LIPA ‚Ä¢ Your Favorites</title>

    <!-- Bootstrap + Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto flex items-center justify-between py-4 px-6">
            <!-- Left: Sidebar toggle + Logo -->
            <div class="flex items-center space-x-4">
                <button class="navbar-toggler border-0" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasMenu">
                    <i class="bi bi-list text-2xl text-gray-800 hover:text-indigo-600"></i>
                </button>
                <div class="text-2xl font-bold text-indigo-600 cursor-pointer" onclick="location.href='index.html'">
                    LIPA
                </div>
            </div>

            <!-- Search bar -->
            <div class="flex-1 mx-6 hidden lg:block">
                <input type="search" placeholder="What are you looking for?"
                    class="w-full border rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-indigo-400" />
            </div>

            <!-- Icons -->
            <div class="flex items-center space-x-6">
                <a href="index.html" aria-label="Home" class="text-gray-600 hover:text-indigo-600">
                    <i class="bi bi-house-door text-2xl"></i>
                </a>
                <!-- Active Favorites -->
                <i class="bi bi-heart-fill text-2xl text-red-500"></i>
                <a href="cart.html" aria-label="Cart" class="relative text-gray-600 hover:text-indigo-600">
                    <i class="bi bi-cart text-2xl"></i>
                    <span id="cartBadge"
                        class="absolute -top-1 -right-2 inline-flex items-center justify-center px-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full">0</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Sidebar Offcanvas -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMenu">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="list-unstyled space-y-2">
                <li><a href="index.html" class="text-gray-700 hover:text-indigo-600">ü™ë Products</a></li>
                <li><a href="#" class="text-gray-700 hover:text-indigo-600">üéÅ Offers & Promotions</a></li>
                <li><a href="#" class="text-gray-700 hover:text-indigo-600">‚ùì FAQs</a></li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">
        <h1 class="text-3xl font-semibold mb-2">Your Favorites</h1>
        <p id="favCount" class="text-gray-600 mb-6">0 items in total</p>
        <p class="text-gray-500 mb-8">
            Liked items are kept if used on the same device and browser.
        </p>

        <!-- Favorites Grid -->
        <div id="favGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
            <!-- JS will insert favorite items here -->
        </div>

        <!-- Empty Message -->
        <p id="emptyMsg" class="text-gray-500 text-center hidden">No favorites yet.</p>
    </main>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Load favorites from localStorage
        document.addEventListener("DOMContentLoaded", () => {
            const favGrid = document.getElementById("favGrid");
            const favCount = document.getElementById("favCount");
            const emptyMsg = document.getElementById("emptyMsg");

            let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

            if (favorites.length === 0) {
                emptyMsg.classList.remove("hidden");
                favCount.innerText = "0 items in total";
                return;
            }

            favCount.innerText = `${favorites.length} item${favorites.length > 1 ? "s" : ""} in total`;

            favorites.forEach(prod => {
                const card = document.createElement("div");
                card.className = "bg-white rounded-lg shadow p-4 flex flex-col";

                card.innerHTML = `
          <div class="h-32 bg-gray-200 rounded-md mb-3 flex items-center justify-center">
            <img src="${prod.image}" alt="${prod.name}" class="max-h-full max-w-full object-contain">
          </div>
          <h3 class="font-medium">${prod.name}</h3>
          <p class="text-gray-500 text-sm flex-grow">${prod.description || ""}</p>
          <div class="mt-4 flex items-center justify-between">
            <button class="text-red-500 hover:text-red-600 remove-fav" data-id="${prod.id}">‚ù§Ô∏è</button>
            <span class="font-bold">‚Ç±${prod.price.toLocaleString()}</span>
          </div>
        `;

                favGrid.appendChild(card);
            });

            // Remove from favorites
            document.querySelectorAll(".remove-fav").forEach(btn => {
                btn.addEventListener("click", (e) => {
                    const id = e.target.dataset.id;
                    favorites = favorites.filter(f => f.id !== id);
                    localStorage.setItem("favorites", JSON.stringify(favorites));
                    location.reload(); // Refresh page to update UI
                });
            });
        });
    </script>
</body>

</html>